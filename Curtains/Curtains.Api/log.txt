2022-11-22 14:33:08.524 +03:00 [INF] Application Start
2022-11-22 14:33:09.149 +03:00 [DBG] Hosting starting
2022-11-22 14:33:09.240 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-11-22 14:33:09.358 +03:00 [INF] Now listening on: http://localhost:5010
2022-11-22 14:33:09.360 +03:00 [DBG] Loaded hosting startup assembly Curtains.Api
2022-11-22 14:33:09.363 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-11-22 14:33:09.365 +03:00 [INF] Hosting environment: Development
2022-11-22 14:33:09.367 +03:00 [INF] Content root path: D:\Study\API_CURTAINS\API_CURTAINS\Curtains\Curtains.Api
2022-11-22 14:33:09.369 +03:00 [DBG] Hosting started
2022-11-22 14:33:15.985 +03:00 [DBG] Connection id "0HMMCFLCDEAO3" accepted.
2022-11-22 14:33:15.990 +03:00 [DBG] Connection id "0HMMCFLCDEAO3" started.
2022-11-22 14:33:15.990 +03:00 [DBG] Connection id "0HMMCFLCDEAO4" accepted.
2022-11-22 14:33:16.000 +03:00 [DBG] Connection id "0HMMCFLCDEAO4" started.
2022-11-22 14:33:16.047 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5010/ - -
2022-11-22 14:33:16.053 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-11-22 14:33:16.081 +03:00 [DBG] No candidates found for the request path '/'
2022-11-22 14:33:16.083 +03:00 [DBG] Request did not match any endpoints
2022-11-22 14:33:16.107 +03:00 [INF] HTTP GET / responded 301 in 18.7858 ms
2022-11-22 14:33:16.115 +03:00 [DBG] Connection id "0HMMCFLCDEAO3" completed keep alive response.
2022-11-22 14:33:16.118 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5010/ - - - 301 0 - 74.5294ms
2022-11-22 14:33:16.128 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5010/index.html - -
2022-11-22 14:33:16.131 +03:00 [DBG] No candidates found for the request path '/index.html'
2022-11-22 14:33:16.132 +03:00 [DBG] Request did not match any endpoints
2022-11-22 14:33:16.241 +03:00 [INF] HTTP GET /index.html responded 200 in 107.2750 ms
2022-11-22 14:33:16.248 +03:00 [DBG] Connection id "0HMMCFLCDEAO3" completed keep alive response.
2022-11-22 14:33:16.251 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5010/index.html - - - 200 - text/html;charset=utf-8 122.9834ms
2022-11-22 14:33:16.269 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5010/swagger-ui.css - -
2022-11-22 14:33:16.273 +03:00 [DBG] No candidates found for the request path '/swagger-ui.css'
2022-11-22 14:33:16.273 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5010/swagger-ui-bundle.js - -
2022-11-22 14:33:16.274 +03:00 [DBG] Connection id "0HMMCFLCDEAO5" accepted.
2022-11-22 14:33:16.279 +03:00 [DBG] Request did not match any endpoints
2022-11-22 14:33:16.282 +03:00 [DBG] No candidates found for the request path '/swagger-ui-bundle.js'
2022-11-22 14:33:16.285 +03:00 [DBG] Connection id "0HMMCFLCDEAO5" started.
2022-11-22 14:33:16.292 +03:00 [DBG] Request did not match any endpoints
2022-11-22 14:33:16.297 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5010/swagger-ui-standalone-preset.js - -
2022-11-22 14:33:16.305 +03:00 [DBG] No candidates found for the request path '/swagger-ui-standalone-preset.js'
2022-11-22 14:33:16.311 +03:00 [DBG] Request did not match any endpoints
2022-11-22 14:33:16.324 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-11-22 14:33:16.326 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-11-22 14:33:16.332 +03:00 [INF] HTTP GET /swagger-ui.css responded 200 in 44.5508 ms
2022-11-22 14:33:16.334 +03:00 [INF] HTTP GET /swagger-ui-standalone-preset.js responded 200 in 20.3590 ms
2022-11-22 14:33:16.344 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-11-22 14:33:16.344 +03:00 [DBG] Connection id "0HMMCFLCDEAO3" completed keep alive response.
2022-11-22 14:33:16.350 +03:00 [DBG] Connection id "0HMMCFLCDEAO5" completed keep alive response.
2022-11-22 14:33:16.354 +03:00 [INF] HTTP GET /swagger-ui-bundle.js responded 200 in 54.8125 ms
2022-11-22 14:33:16.360 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5010/swagger-ui.css - - - 200 143943 text/css 90.8609ms
2022-11-22 14:33:16.362 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5010/swagger-ui-standalone-preset.js - - - 200 339486 application/javascript 64.7527ms
2022-11-22 14:33:16.366 +03:00 [DBG] Connection id "0HMMCFLCDEAO4" completed keep alive response.
2022-11-22 14:33:16.377 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5010/swagger-ui-bundle.js - - - 200 1096145 application/javascript 103.6938ms
2022-11-22 14:33:16.645 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5010/swagger/v1/swagger.json - -
2022-11-22 14:33:16.648 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-11-22 14:33:16.650 +03:00 [DBG] Request did not match any endpoints
2022-11-22 14:33:16.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5010/favicon-32x32.png - -
2022-11-22 14:33:16.659 +03:00 [DBG] No candidates found for the request path '/favicon-32x32.png'
2022-11-22 14:33:16.662 +03:00 [DBG] Request did not match any endpoints
2022-11-22 14:33:16.664 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-11-22 14:33:16.672 +03:00 [INF] HTTP GET /favicon-32x32.png responded 200 in 8.3262 ms
2022-11-22 14:33:16.677 +03:00 [DBG] Connection id "0HMMCFLCDEAO5" completed keep alive response.
2022-11-22 14:33:16.679 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5010/favicon-32x32.png - - - 200 628 image/png 22.2102ms
2022-11-22 14:33:16.769 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 115.9953 ms
2022-11-22 14:33:16.773 +03:00 [DBG] Connection id "0HMMCFLCDEAO4" completed keep alive response.
2022-11-22 14:33:16.776 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5010/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 130.1021ms
2022-11-22 14:33:21.119 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5010/api/ProductImage/GetNewItems - -
2022-11-22 14:33:21.133 +03:00 [DBG] 1 candidate(s) found for the request path '/api/ProductImage/GetNewItems'
2022-11-22 14:33:21.144 +03:00 [DBG] Endpoint 'Curtains.Api.Controllers.ProductImageController.GetNewItems (Curtains.Api)' with route pattern 'api/ProductImage/GetNewItems' is valid for the request path '/api/ProductImage/GetNewItems'
2022-11-22 14:33:21.149 +03:00 [DBG] Request matched endpoint 'Curtains.Api.Controllers.ProductImageController.GetNewItems (Curtains.Api)'
2022-11-22 14:33:21.154 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-22 14:33:21.156 +03:00 [INF] Executing endpoint 'Curtains.Api.Controllers.ProductImageController.GetNewItems (Curtains.Api)'
2022-11-22 14:33:21.170 +03:00 [INF] Route matched with {action = "GetNewItems", controller = "ProductImage"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Curtains.Application.DTO.ProductImageDTO]] GetNewItems() on controller Curtains.Api.Controllers.ProductImageController (Curtains.Api).
2022-11-22 14:33:21.176 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-11-22 14:33:21.179 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-22 14:33:21.185 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-22 14:33:21.192 +03:00 [DBG] Execution plan of exception filters (in the following order): ["Curtains.Infrastructure.Shared.HttpGlobalExceptionFilter"]
2022-11-22 14:33:21.194 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-22 14:33:21.200 +03:00 [DBG] Executing controller factory for controller Curtains.Api.Controllers.ProductImageController (Curtains.Api)
2022-11-22 14:33:21.357 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-11-22 14:33:21.401 +03:00 [DBG] Executed controller factory for controller Curtains.Api.Controllers.ProductImageController (Curtains.Api)
2022-11-22 14:33:22.223 +03:00 [DBG] The property 'ProductImageModel.BedspreadsId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-22 14:33:22.227 +03:00 [DBG] The property 'ProductImageModel.CurtainsId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-22 14:33:22.231 +03:00 [DBG] The property 'ProductImageModel.FabricId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-22 14:33:22.235 +03:00 [DBG] The property 'ProductImageModel.PillowsId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-22 14:33:22.240 +03:00 [DBG] The property 'ProductImageModel.SetsId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-22 14:33:22.319 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'AccessoriesModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:33:22.324 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'BedspreadsModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:33:22.328 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CurtainsModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:33:22.332 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'DeliveryTypeModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:33:22.342 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'FabricModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:33:22.349 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'LambrequinsModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:33:22.358 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'PillowsModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:33:22.366 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'ProductSetModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:33:22.374 +03:00 [WRN] No store type was specified for the decimal property 'Cost' on entity type 'UserOrderModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:33:22.574 +03:00 [INF] Entity Framework Core 6.0.9 initialized 'CurtainsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: MigrationsAssembly=Curtains.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null 
2022-11-22 14:33:22.765 +03:00 [DBG] Compiling query expression: 
'DbSet<ProductImageModel>()
    .Include(x => x.Curtains)
    .Include(x => x.Pillows)
    .Include(x => x.Bedspreads)
    .Include(x => x.Sets)
    .Include(x => x.Fabric)
    .Include(x => x.MarketingInfo)
    .AsNoTracking()'
2022-11-22 14:33:22.885 +03:00 [DBG] Including navigation: 'ProductImageModel.Curtains'.
2022-11-22 14:33:22.891 +03:00 [DBG] Including navigation: 'ProductImageModel.Pillows'.
2022-11-22 14:33:22.893 +03:00 [DBG] Including navigation: 'ProductImageModel.Bedspreads'.
2022-11-22 14:33:22.899 +03:00 [DBG] Including navigation: 'ProductImageModel.Sets'.
2022-11-22 14:33:22.904 +03:00 [DBG] Including navigation: 'ProductImageModel.Fabric'.
2022-11-22 14:33:22.910 +03:00 [DBG] Including navigation: 'ProductImageModel.MarketingInfo'.
2022-11-22 14:33:23.069 +03:00 [DBG] Connection id "0HMMCFLCDEAO3" received FIN.
2022-11-22 14:33:23.069 +03:00 [DBG] Connection id "0HMMCFLCDEAO5" received FIN.
2022-11-22 14:33:23.074 +03:00 [DBG] Connection id "0HMMCFLCDEAO3" sending FIN because: "The client closed the connection."
2022-11-22 14:33:23.077 +03:00 [DBG] Connection id "0HMMCFLCDEAO5" disconnecting.
2022-11-22 14:33:23.082 +03:00 [DBG] Connection id "0HMMCFLCDEAO3" disconnecting.
2022-11-22 14:33:23.084 +03:00 [DBG] Connection id "0HMMCFLCDEAO5" sending FIN because: "The client closed the connection."
2022-11-22 14:33:23.101 +03:00 [DBG] Connection id "0HMMCFLCDEAO3" stopped.
2022-11-22 14:33:23.101 +03:00 [DBG] Connection id "0HMMCFLCDEAO5" stopped.
2022-11-22 14:33:23.104 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ProductImageModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ProductImageModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ProductImageModel.BedspreadsId (no field, int?) Shadow FK Index, 1], [Property: ProductImageModel.CurtainsId (no field, int?) Shadow FK Index, 2], [Property: ProductImageModel.FabricId (no field, int?) Shadow FK Index, 3], [Property: ProductImageModel.ImagePath (string), 4], [Property: ProductImageModel.PillowsId (no field, int?) Shadow FK Index, 5], [Property: ProductImageModel.SetsId (no field, int?) Shadow FK Index, 6] }
            1 -> Dictionary<IProperty, int> { [Property: CurtainsModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: CurtainsModel.AccessoriesId (int) Required FK Index, 8], [Property: CurtainsModel.CurtainsKindId (int) Required FK Index, 9], [Property: CurtainsModel.CurtainsTypeId (int) Required FK Index, 10], [Property: CurtainsModel.Density (bool) Required, 11], [Property: CurtainsModel.Description (string), 12], [Property: CurtainsModel.FabricId (int) Required FK Index, 13], [Property: CurtainsModel.Height (int) Required, 14], [Property: CurtainsModel.MaterialId (int) Required FK Index, 15], [Property: CurtainsModel.Price (decimal) Required, 16], [Property: CurtainsModel.Purpose (string), 17], [Property: CurtainsModel.SunProtection (bool) Required, 18], [Property: CurtainsModel.Title (string), 19], [Property: CurtainsModel.Width (int) Required, 20] }
            2 -> Dictionary<IProperty, int> { [Property: PillowsModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 21], [Property: PillowsModel.Description (string), 22], [Property: PillowsModel.FabricId (int) Required FK Index, 23], [Property: PillowsModel.Filler (string), 24], [Property: PillowsModel.Price (decimal) Required, 25], [Property: PillowsModel.RemovableCover (bool) Required, 26], [Property: PillowsModel.Shape (string), 27], [Property: PillowsModel.Size (string), 28], [Property: PillowsModel.Title (string), 29] }
            3 -> Dictionary<IProperty, int> { [Property: BedspreadsModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: BedspreadsModel.Description (string), 31], [Property: BedspreadsModel.FabricId (int) Required FK Index, 32], [Property: BedspreadsModel.Length (int) Required, 33], [Property: BedspreadsModel.Price (decimal) Required, 34], [Property: BedspreadsModel.Purpose (string), 35], [Property: BedspreadsModel.Shape (string), 36], [Property: BedspreadsModel.Size (string), 37], [Property: BedspreadsModel.Title (string), 38], [Property: BedspreadsModel.Width (int) Required, 39] }
            4 -> Dictionary<IProperty, int> { [Property: ProductSetModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: ProductSetModel.BedspreadsId (int?) FK Index, 41], [Property: ProductSetModel.CurtainsId (int?) FK Index, 42], [Property: ProductSetModel.Description (string), 43], [Property: ProductSetModel.PillowsId (int?) FK Index, 44], [Property: ProductSetModel.Price (decimal) Required, 45], [Property: ProductSetModel.Title (string), 46] }
            5 -> Dictionary<IProperty, int> { [Property: FabricModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 47], [Property: FabricModel.ColorId (int) Required FK Index, 48], [Property: FabricModel.ConsistencyId (int) Required FK Index, 49], [Property: FabricModel.DecorationsId (int) Required FK Index, 50], [Property: FabricModel.Density (bool) Required, 51], [Property: FabricModel.Description (string), 52], [Property: FabricModel.Design (bool) Required, 53], [Property: FabricModel.Length (int) Required, 54], [Property: FabricModel.ManufacturerId (int) Required FK Index, 55], [Property: FabricModel.Price (decimal) Required, 56], [Property: FabricModel.Title (string), 57], [Property: FabricModel.Width (int) Required, 58] }
            6 -> Dictionary<IProperty, int> { [Property: MarketingInfoModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 59], [Property: MarketingInfoModel.IsNew (bool) Required, 60], [Property: MarketingInfoModel.IsPopular (bool) Required, 61], [Property: MarketingInfoModel.IsSale (bool) Required, 62], [Property: MarketingInfoModel.ProductImageId (int) Required FK Index, 63] }
        SELECT p.Id, p.BedspreadsId, p.CurtainsId, p.FabricId, p.ImagePath, p.PillowsId, p.SetsId, c.Id, c.AccessoriesId, c.CurtainsKindId, c.CurtainsTypeId, c.Density, c.Description, c.FabricId, c.Height, c.MaterialId, c.Price, c.Purpose, c.SunProtection, c.Title, c.Width, p0.Id, p0.Description, p0.FabricId, p0.Filler, p0.Price, p0.RemovableCover, p0.Shape, p0.Size, p0.Title, b.Id, b.Description, b.FabricId, b.Length, b.Price, b.Purpose, b.Shape, b.Size, b.Title, b.Width, s.Id, s.BedspreadsId, s.CurtainsId, s.Description, s.PillowsId, s.Price, s.Title, f.Id, f.ColorId, f.ConsistencyId, f.DecorationsId, f.Density, f.Description, f.Design, f.Length, f.ManufacturerId, f.Price, f.Title, f.Width, m.Id, m.IsNew, m.IsPopular, m.IsSale, m.ProductImageId
        FROM ProductImages AS p
        LEFT JOIN Curtains AS c ON p.CurtainsId == c.Id
        LEFT JOIN Pillows AS p0 ON p.PillowsId == p0.Id
        LEFT JOIN Bedspreads AS b ON p.BedspreadsId == b.Id
        LEFT JOIN Sets AS s ON p.SetsId == s.Id
        LEFT JOIN Fabrics AS f ON p.FabricId == f.Id
        LEFT JOIN MarketingInfos AS m ON p.Id == m.ProductImageId), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ProductImageModel>, 
    Curtains.Infrastructure.Database.CurtainsDbContext, 
    False, 
    False, 
    True
)'
2022-11-22 14:33:23.186 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-22 14:33:23.246 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (57ms).
2022-11-22 14:33:23.256 +03:00 [DBG] Opening connection to database 'Curtains' on server '(localdb)\mssqllocaldb'.
2022-11-22 14:33:29.048 +03:00 [ERR] An error occurred using the connection to database 'Curtains' on server '(localdb)\mssqllocaldb'.
2022-11-22 14:33:29.086 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Curtains.Infrastructure.Database.CurtainsDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "Curtains" requested by the login. The login failed.
Login failed for user 'LAPTOP-5FEF06FG\Asus'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__19_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
ClientConnectionId:6d2b2dfc-23d5-4b52-b044-079c010a0670
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "Curtains" requested by the login. The login failed.
Login failed for user 'LAPTOP-5FEF06FG\Asus'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__19_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
ClientConnectionId:6d2b2dfc-23d5-4b52-b044-079c010a0670
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
2022-11-22 14:33:29.279 +03:00 [ERR] Failed api call: /api/ProductImage/GetNewItems.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
EntityQueryable`1 -> IEnumerable`1
Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[Curtains.Domain.Models.ProductImageModel, Curtains.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.IEnumerable`1[[Curtains.Application.DTO.ProductImageDTO, Curtains.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "Curtains" requested by the login. The login failed.
Login failed for user 'LAPTOP-5FEF06FG\Asus'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__19_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
ClientConnectionId:6d2b2dfc-23d5-4b52-b044-079c010a0670
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at lambda_method28(Closure , Object , IEnumerable`1 , ResolutionContext )
   --- End of inner exception stack trace ---
   at lambda_method28(Closure , Object , IEnumerable`1 , ResolutionContext )
   at Curtains.Application.CurtainsServices.ProductImageService.GetNewItems() in D:\Study\API_CURTAINS\API_CURTAINS\Curtains\Curtains.Application\CurtainsService\ProductImageService.cs:line 50
   at Curtains.Api.Controllers.ProductImageController.GetNewItems() in D:\Study\API_CURTAINS\API_CURTAINS\Curtains\Curtains.Api\Controllers\ProductImageController.cs:line 34
   at lambda_method3(Closure , Object , Object[] )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2022-11-22 14:33:29.548 +03:00 [DBG] Request was short circuited at exception filter 'Curtains.Infrastructure.Shared.HttpGlobalExceptionFilter'.
2022-11-22 14:33:29.558 +03:00 [INF] Executed action Curtains.Api.Controllers.ProductImageController.GetNewItems (Curtains.Api) in 8353.9985ms
2022-11-22 14:33:29.564 +03:00 [INF] Executed endpoint 'Curtains.Api.Controllers.ProductImageController.GetNewItems (Curtains.Api)'
2022-11-22 14:33:29.568 +03:00 [ERR] HTTP GET /api/ProductImage/GetNewItems responded 500 in 8414.8146 ms
2022-11-22 14:33:29.574 +03:00 [DBG] Connection id "0HMMCFLCDEAO4" completed keep alive response.
2022-11-22 14:33:29.582 +03:00 [DBG] 'CurtainsDbContext' disposed.
2022-11-22 14:33:29.590 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5010/api/ProductImage/GetNewItems - - - 500 - application/json 8470.6026ms
2022-11-22 14:33:33.091 +03:00 [DBG] Connection id "0HMMCFLCDEAO4" received FIN.
2022-11-22 14:33:33.095 +03:00 [DBG] Connection id "0HMMCFLCDEAO4" disconnecting.
2022-11-22 14:33:33.096 +03:00 [DBG] Connection id "0HMMCFLCDEAO4" sending FIN because: "The client closed the connection."
2022-11-22 14:33:33.107 +03:00 [DBG] Connection id "0HMMCFLCDEAO4" stopped.
2022-11-22 14:34:39.771 +03:00 [DBG] Config reload token fired. Checking for changes...
2022-11-22 14:34:40.039 +03:00 [DBG] Config reload token fired. Checking for changes...
2022-11-22 14:34:55.332 +03:00 [INF] Application Start
2022-11-22 14:34:55.950 +03:00 [DBG] Hosting starting
2022-11-22 14:34:56.036 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-11-22 14:34:56.150 +03:00 [INF] Now listening on: http://localhost:5010
2022-11-22 14:34:56.152 +03:00 [DBG] Loaded hosting startup assembly Curtains.Api
2022-11-22 14:34:56.154 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-11-22 14:34:56.158 +03:00 [INF] Hosting environment: Development
2022-11-22 14:34:56.160 +03:00 [INF] Content root path: D:\Study\API_CURTAINS\API_CURTAINS\Curtains\Curtains.Api
2022-11-22 14:34:56.162 +03:00 [DBG] Hosting started
2022-11-22 14:35:22.096 +03:00 [DBG] Connection id "0HMMCFMI04QG0" accepted.
2022-11-22 14:35:22.104 +03:00 [DBG] Connection id "0HMMCFMI04QG0" started.
2022-11-22 14:35:22.104 +03:00 [DBG] Connection id "0HMMCFMI04QG1" accepted.
2022-11-22 14:35:22.111 +03:00 [DBG] Connection id "0HMMCFMI04QG1" started.
2022-11-22 14:35:22.147 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5010/index.html - -
2022-11-22 14:35:22.158 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-11-22 14:35:22.190 +03:00 [DBG] No candidates found for the request path '/index.html'
2022-11-22 14:35:22.195 +03:00 [DBG] Request did not match any endpoints
2022-11-22 14:35:22.366 +03:00 [INF] HTTP GET /index.html responded 200 in 166.3745 ms
2022-11-22 14:35:22.374 +03:00 [DBG] Connection id "0HMMCFMI04QG0" completed keep alive response.
2022-11-22 14:35:22.379 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5010/index.html - - - 200 - text/html;charset=utf-8 235.1549ms
2022-11-22 14:35:22.580 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5010/swagger/v1/swagger.json - -
2022-11-22 14:35:22.582 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2022-11-22 14:35:22.587 +03:00 [DBG] Request did not match any endpoints
2022-11-22 14:35:22.732 +03:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 142.0406 ms
2022-11-22 14:35:22.738 +03:00 [DBG] Connection id "0HMMCFMI04QG0" completed keep alive response.
2022-11-22 14:35:22.742 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5010/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 162.2984ms
2022-11-22 14:35:23.343 +03:00 [DBG] Connection id "0HMMCFMI04QG1" received FIN.
2022-11-22 14:35:23.343 +03:00 [DBG] Connection id "0HMMCFMI04QG0" received FIN.
2022-11-22 14:35:23.347 +03:00 [DBG] Connection id "0HMMCFMI04QG1" disconnecting.
2022-11-22 14:35:23.351 +03:00 [DBG] Connection id "0HMMCFMI04QG0" disconnecting.
2022-11-22 14:35:23.359 +03:00 [DBG] Connection id "0HMMCFMI04QG0" sending FIN because: "The client closed the connection."
2022-11-22 14:35:23.359 +03:00 [DBG] Connection id "0HMMCFMI04QG1" sending FIN because: "The client closed the connection."
2022-11-22 14:35:23.371 +03:00 [DBG] Connection id "0HMMCFMI04QG1" stopped.
2022-11-22 14:35:23.371 +03:00 [DBG] Connection id "0HMMCFMI04QG0" stopped.
2022-11-22 14:35:27.368 +03:00 [DBG] Connection id "0HMMCFMI04QG2" accepted.
2022-11-22 14:35:27.371 +03:00 [DBG] Connection id "0HMMCFMI04QG2" started.
2022-11-22 14:35:27.373 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5010/api/ProductImage/GetNewItems - -
2022-11-22 14:35:27.385 +03:00 [DBG] 1 candidate(s) found for the request path '/api/ProductImage/GetNewItems'
2022-11-22 14:35:27.392 +03:00 [DBG] Endpoint 'Curtains.Api.Controllers.ProductImageController.GetNewItems (Curtains.Api)' with route pattern 'api/ProductImage/GetNewItems' is valid for the request path '/api/ProductImage/GetNewItems'
2022-11-22 14:35:27.399 +03:00 [DBG] Request matched endpoint 'Curtains.Api.Controllers.ProductImageController.GetNewItems (Curtains.Api)'
2022-11-22 14:35:27.404 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2022-11-22 14:35:27.407 +03:00 [INF] Executing endpoint 'Curtains.Api.Controllers.ProductImageController.GetNewItems (Curtains.Api)'
2022-11-22 14:35:27.424 +03:00 [INF] Route matched with {action = "GetNewItems", controller = "ProductImage"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Curtains.Application.DTO.ProductImageDTO]] GetNewItems() on controller Curtains.Api.Controllers.ProductImageController (Curtains.Api).
2022-11-22 14:35:27.432 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-11-22 14:35:27.435 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-11-22 14:35:27.438 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-11-22 14:35:27.443 +03:00 [DBG] Execution plan of exception filters (in the following order): ["Curtains.Infrastructure.Shared.HttpGlobalExceptionFilter"]
2022-11-22 14:35:27.450 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-11-22 14:35:27.455 +03:00 [DBG] Executing controller factory for controller Curtains.Api.Controllers.ProductImageController (Curtains.Api)
2022-11-22 14:35:27.592 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-11-22 14:35:27.627 +03:00 [DBG] Executed controller factory for controller Curtains.Api.Controllers.ProductImageController (Curtains.Api)
2022-11-22 14:35:28.391 +03:00 [DBG] The property 'ProductImageModel.BedspreadsId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-22 14:35:28.394 +03:00 [DBG] The property 'ProductImageModel.CurtainsId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-22 14:35:28.398 +03:00 [DBG] The property 'ProductImageModel.FabricId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-22 14:35:28.401 +03:00 [DBG] The property 'ProductImageModel.PillowsId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-22 14:35:28.404 +03:00 [DBG] The property 'ProductImageModel.SetsId' was created in shadow state because there are no eligible CLR members with a matching name.
2022-11-22 14:35:28.452 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'AccessoriesModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:35:28.455 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'BedspreadsModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:35:28.458 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'CurtainsModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:35:28.461 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'DeliveryTypeModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:35:28.465 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'FabricModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:35:28.468 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'LambrequinsModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:35:28.471 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'PillowsModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:35:28.480 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'ProductSetModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:35:28.483 +03:00 [WRN] No store type was specified for the decimal property 'Cost' on entity type 'UserOrderModel'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2022-11-22 14:35:28.667 +03:00 [INF] Entity Framework Core 6.0.9 initialized 'CurtainsDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.9' with options: MigrationsAssembly=Curtains.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null 
2022-11-22 14:35:28.805 +03:00 [DBG] Compiling query expression: 
'DbSet<ProductImageModel>()
    .Include(x => x.Curtains)
    .Include(x => x.Pillows)
    .Include(x => x.Bedspreads)
    .Include(x => x.Sets)
    .Include(x => x.Fabric)
    .Include(x => x.MarketingInfo)
    .AsNoTracking()'
2022-11-22 14:35:28.926 +03:00 [DBG] Including navigation: 'ProductImageModel.Curtains'.
2022-11-22 14:35:28.931 +03:00 [DBG] Including navigation: 'ProductImageModel.Pillows'.
2022-11-22 14:35:28.935 +03:00 [DBG] Including navigation: 'ProductImageModel.Bedspreads'.
2022-11-22 14:35:28.940 +03:00 [DBG] Including navigation: 'ProductImageModel.Sets'.
2022-11-22 14:35:28.944 +03:00 [DBG] Including navigation: 'ProductImageModel.Fabric'.
2022-11-22 14:35:28.951 +03:00 [DBG] Including navigation: 'ProductImageModel.MarketingInfo'.
2022-11-22 14:35:29.169 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ProductImageModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: ProductImageModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ProductImageModel.BedspreadsId (no field, int?) Shadow FK Index, 1], [Property: ProductImageModel.CurtainsId (no field, int?) Shadow FK Index, 2], [Property: ProductImageModel.FabricId (no field, int?) Shadow FK Index, 3], [Property: ProductImageModel.ImagePath (string), 4], [Property: ProductImageModel.PillowsId (no field, int?) Shadow FK Index, 5], [Property: ProductImageModel.SetsId (no field, int?) Shadow FK Index, 6] }
            1 -> Dictionary<IProperty, int> { [Property: CurtainsModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: CurtainsModel.AccessoriesId (int) Required FK Index, 8], [Property: CurtainsModel.CurtainsKindId (int) Required FK Index, 9], [Property: CurtainsModel.CurtainsTypeId (int) Required FK Index, 10], [Property: CurtainsModel.Density (bool) Required, 11], [Property: CurtainsModel.Description (string), 12], [Property: CurtainsModel.FabricId (int) Required FK Index, 13], [Property: CurtainsModel.Height (int) Required, 14], [Property: CurtainsModel.MaterialId (int) Required FK Index, 15], [Property: CurtainsModel.Price (decimal) Required, 16], [Property: CurtainsModel.Purpose (string), 17], [Property: CurtainsModel.SunProtection (bool) Required, 18], [Property: CurtainsModel.Title (string), 19], [Property: CurtainsModel.Width (int) Required, 20] }
            2 -> Dictionary<IProperty, int> { [Property: PillowsModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 21], [Property: PillowsModel.Description (string), 22], [Property: PillowsModel.FabricId (int) Required FK Index, 23], [Property: PillowsModel.Filler (string), 24], [Property: PillowsModel.Price (decimal) Required, 25], [Property: PillowsModel.RemovableCover (bool) Required, 26], [Property: PillowsModel.Shape (string), 27], [Property: PillowsModel.Size (string), 28], [Property: PillowsModel.Title (string), 29] }
            3 -> Dictionary<IProperty, int> { [Property: BedspreadsModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: BedspreadsModel.Description (string), 31], [Property: BedspreadsModel.FabricId (int) Required FK Index, 32], [Property: BedspreadsModel.Length (int) Required, 33], [Property: BedspreadsModel.Price (decimal) Required, 34], [Property: BedspreadsModel.Purpose (string), 35], [Property: BedspreadsModel.Shape (string), 36], [Property: BedspreadsModel.Size (string), 37], [Property: BedspreadsModel.Title (string), 38], [Property: BedspreadsModel.Width (int) Required, 39] }
            4 -> Dictionary<IProperty, int> { [Property: ProductSetModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: ProductSetModel.BedspreadsId (int?) FK Index, 41], [Property: ProductSetModel.CurtainsId (int?) FK Index, 42], [Property: ProductSetModel.Description (string), 43], [Property: ProductSetModel.PillowsId (int?) FK Index, 44], [Property: ProductSetModel.Price (decimal) Required, 45], [Property: ProductSetModel.Title (string), 46] }
            5 -> Dictionary<IProperty, int> { [Property: FabricModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 47], [Property: FabricModel.ColorId (int) Required FK Index, 48], [Property: FabricModel.ConsistencyId (int) Required FK Index, 49], [Property: FabricModel.DecorationsId (int) Required FK Index, 50], [Property: FabricModel.Density (bool) Required, 51], [Property: FabricModel.Description (string), 52], [Property: FabricModel.Design (bool) Required, 53], [Property: FabricModel.Length (int) Required, 54], [Property: FabricModel.ManufacturerId (int) Required FK Index, 55], [Property: FabricModel.Price (decimal) Required, 56], [Property: FabricModel.Title (string), 57], [Property: FabricModel.Width (int) Required, 58] }
            6 -> Dictionary<IProperty, int> { [Property: MarketingInfoModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 59], [Property: MarketingInfoModel.IsNew (bool) Required, 60], [Property: MarketingInfoModel.IsPopular (bool) Required, 61], [Property: MarketingInfoModel.IsSale (bool) Required, 62], [Property: MarketingInfoModel.ProductImageId (int) Required FK Index, 63] }
        SELECT p.Id, p.BedspreadsId, p.CurtainsId, p.FabricId, p.ImagePath, p.PillowsId, p.SetsId, c.Id, c.AccessoriesId, c.CurtainsKindId, c.CurtainsTypeId, c.Density, c.Description, c.FabricId, c.Height, c.MaterialId, c.Price, c.Purpose, c.SunProtection, c.Title, c.Width, p0.Id, p0.Description, p0.FabricId, p0.Filler, p0.Price, p0.RemovableCover, p0.Shape, p0.Size, p0.Title, b.Id, b.Description, b.FabricId, b.Length, b.Price, b.Purpose, b.Shape, b.Size, b.Title, b.Width, s.Id, s.BedspreadsId, s.CurtainsId, s.Description, s.PillowsId, s.Price, s.Title, f.Id, f.ColorId, f.ConsistencyId, f.DecorationsId, f.Density, f.Description, f.Design, f.Length, f.ManufacturerId, f.Price, f.Title, f.Width, m.Id, m.IsNew, m.IsPopular, m.IsSale, m.ProductImageId
        FROM ProductImages AS p
        LEFT JOIN Curtains AS c ON p.CurtainsId == c.Id
        LEFT JOIN Pillows AS p0 ON p.PillowsId == p0.Id
        LEFT JOIN Bedspreads AS b ON p.BedspreadsId == b.Id
        LEFT JOIN Sets AS s ON p.SetsId == s.Id
        LEFT JOIN Fabrics AS f ON p.FabricId == f.Id
        LEFT JOIN MarketingInfos AS m ON p.Id == m.ProductImageId), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ProductImageModel>, 
    Curtains.Infrastructure.Database.CurtainsDbContext, 
    False, 
    False, 
    True
)'
2022-11-22 14:35:29.247 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-11-22 14:35:29.289 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (40ms).
2022-11-22 14:35:29.299 +03:00 [DBG] Opening connection to database 'Curtains' on server 'LAPTOP-5FEF06FG'.
2022-11-22 14:35:29.580 +03:00 [DBG] Opened connection to database 'Curtains' on server 'LAPTOP-5FEF06FG'.
2022-11-22 14:35:29.592 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[BedspreadsId], [p].[CurtainsId], [p].[FabricId], [p].[ImagePath], [p].[PillowsId], [p].[SetsId], [c].[Id], [c].[AccessoriesId], [c].[CurtainsKindId], [c].[CurtainsTypeId], [c].[Density], [c].[Description], [c].[FabricId], [c].[Height], [c].[MaterialId], [c].[Price], [c].[Purpose], [c].[SunProtection], [c].[Title], [c].[Width], [p0].[Id], [p0].[Description], [p0].[FabricId], [p0].[Filler], [p0].[Price], [p0].[RemovableCover], [p0].[Shape], [p0].[Size], [p0].[Title], [b].[Id], [b].[Description], [b].[FabricId], [b].[Length], [b].[Price], [b].[Purpose], [b].[Shape], [b].[Size], [b].[Title], [b].[Width], [s].[Id], [s].[BedspreadsId], [s].[CurtainsId], [s].[Description], [s].[PillowsId], [s].[Price], [s].[Title], [f].[Id], [f].[ColorId], [f].[ConsistencyId], [f].[DecorationsId], [f].[Density], [f].[Description], [f].[Design], [f].[Length], [f].[ManufacturerId], [f].[Price], [f].[Title], [f].[Width], [m].[Id], [m].[IsNew], [m].[IsPopular], [m].[IsSale], [m].[ProductImageId]
FROM [ProductImages] AS [p]
LEFT JOIN [Curtains] AS [c] ON [p].[CurtainsId] = [c].[Id]
LEFT JOIN [Pillows] AS [p0] ON [p].[PillowsId] = [p0].[Id]
LEFT JOIN [Bedspreads] AS [b] ON [p].[BedspreadsId] = [b].[Id]
LEFT JOIN [Sets] AS [s] ON [p].[SetsId] = [s].[Id]
LEFT JOIN [Fabrics] AS [f] ON [p].[FabricId] = [f].[Id]
LEFT JOIN [MarketingInfos] AS [m] ON [p].[Id] = [m].[ProductImageId]
2022-11-22 14:35:29.657 +03:00 [ERR] Failed executing DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[BedspreadsId], [p].[CurtainsId], [p].[FabricId], [p].[ImagePath], [p].[PillowsId], [p].[SetsId], [c].[Id], [c].[AccessoriesId], [c].[CurtainsKindId], [c].[CurtainsTypeId], [c].[Density], [c].[Description], [c].[FabricId], [c].[Height], [c].[MaterialId], [c].[Price], [c].[Purpose], [c].[SunProtection], [c].[Title], [c].[Width], [p0].[Id], [p0].[Description], [p0].[FabricId], [p0].[Filler], [p0].[Price], [p0].[RemovableCover], [p0].[Shape], [p0].[Size], [p0].[Title], [b].[Id], [b].[Description], [b].[FabricId], [b].[Length], [b].[Price], [b].[Purpose], [b].[Shape], [b].[Size], [b].[Title], [b].[Width], [s].[Id], [s].[BedspreadsId], [s].[CurtainsId], [s].[Description], [s].[PillowsId], [s].[Price], [s].[Title], [f].[Id], [f].[ColorId], [f].[ConsistencyId], [f].[DecorationsId], [f].[Density], [f].[Description], [f].[Design], [f].[Length], [f].[ManufacturerId], [f].[Price], [f].[Title], [f].[Width], [m].[Id], [m].[IsNew], [m].[IsPopular], [m].[IsSale], [m].[ProductImageId]
FROM [ProductImages] AS [p]
LEFT JOIN [Curtains] AS [c] ON [p].[CurtainsId] = [c].[Id]
LEFT JOIN [Pillows] AS [p0] ON [p].[PillowsId] = [p0].[Id]
LEFT JOIN [Bedspreads] AS [b] ON [p].[BedspreadsId] = [b].[Id]
LEFT JOIN [Sets] AS [s] ON [p].[SetsId] = [s].[Id]
LEFT JOIN [Fabrics] AS [f] ON [p].[FabricId] = [f].[Id]
LEFT JOIN [MarketingInfos] AS [m] ON [p].[Id] = [m].[ProductImageId]
2022-11-22 14:35:29.671 +03:00 [DBG] Closing connection to database 'Curtains' on server 'LAPTOP-5FEF06FG'.
2022-11-22 14:35:29.683 +03:00 [DBG] Closed connection to database 'Curtains' on server 'LAPTOP-5FEF06FG'.
2022-11-22 14:35:29.709 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Curtains.Infrastructure.Database.CurtainsDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904):    "Sets".
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__19_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:e5950bed-18c8-405a-922b-4a289273e89a
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904):    "Sets".
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__19_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:e5950bed-18c8-405a-922b-4a289273e89a
Error Number:208,State:1,Class:16
2022-11-22 14:35:29.778 +03:00 [ERR] Failed api call: /api/ProductImage/GetNewItems.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
EntityQueryable`1 -> IEnumerable`1
Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[Curtains.Domain.Models.ProductImageModel, Curtains.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.IEnumerable`1[[Curtains.Application.DTO.ProductImageDTO, Curtains.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904):    "Sets".
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__19_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at lambda_method28(Closure , Object , IEnumerable`1 , ResolutionContext )
ClientConnectionId:e5950bed-18c8-405a-922b-4a289273e89a
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at lambda_method28(Closure , Object , IEnumerable`1 , ResolutionContext )
   at Curtains.Application.CurtainsServices.ProductImageService.GetNewItems() in D:\Study\API_CURTAINS\API_CURTAINS\Curtains\Curtains.Application\CurtainsService\ProductImageService.cs:line 50
   at Curtains.Api.Controllers.ProductImageController.GetNewItems() in D:\Study\API_CURTAINS\API_CURTAINS\Curtains\Curtains.Api\Controllers\ProductImageController.cs:line 34
   at lambda_method3(Closure , Object , Object[] )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2022-11-22 14:35:29.873 +03:00 [DBG] Request was short circuited at exception filter 'Curtains.Infrastructure.Shared.HttpGlobalExceptionFilter'.
2022-11-22 14:35:29.882 +03:00 [INF] Executed action Curtains.Api.Controllers.ProductImageController.GetNewItems (Curtains.Api) in 2423.2758ms
2022-11-22 14:35:29.885 +03:00 [INF] Executed endpoint 'Curtains.Api.Controllers.ProductImageController.GetNewItems (Curtains.Api)'
2022-11-22 14:35:29.887 +03:00 [ERR] HTTP GET /api/ProductImage/GetNewItems responded 500 in 2484.0375 ms
2022-11-22 14:35:29.891 +03:00 [DBG] Connection id "0HMMCFMI04QG2" completed keep alive response.
2022-11-22 14:35:29.897 +03:00 [DBG] 'CurtainsDbContext' disposed.
2022-11-22 14:35:29.903 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5010/api/ProductImage/GetNewItems - - - 500 - application/json 2529.0089ms
2022-11-22 14:35:33.366 +03:00 [DBG] Connection id "0HMMCFMI04QG2" received FIN.
2022-11-22 14:35:33.369 +03:00 [DBG] Connection id "0HMMCFMI04QG2" disconnecting.
2022-11-22 14:35:33.371 +03:00 [DBG] Connection id "0HMMCFMI04QG2" sending FIN because: "The client closed the connection."
2022-11-22 14:35:33.380 +03:00 [DBG] Connection id "0HMMCFMI04QG2" stopped.
